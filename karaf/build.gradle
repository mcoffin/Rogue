def mavenCommand = "mvn"

if (System.getProperty("os.name").startsWith("Windows")) {
    mavenCommand = "mvn.cmd"
}

task installWPILibKar(type: Exec, dependsOn: ':wpilib:install') {
    workingDir 'wpilib-kar'

    commandLine mavenCommand, 'install'
}

task installGuiceFeatures(type: Exec) {
    workingDir 'guice'

    commandLine mavenCommand, 'install'
}

task installRogueWpiKar(type: Exec, dependsOn: ':rogue-wpi:install') {
    workingDir 'rogue-wpi'

    commandLine mavenCommand, 'install'
}

task dist(type: Exec, dependsOn: [installWPILibKar, installGuiceFeatures, installRogueWpiKar]) {
    commandLine mavenCommand, 'package'
}

task cleanMaven(type: Exec) {
    commandLine mavenCommand, 'clean'
}

clean.dependsOn cleanMaven
